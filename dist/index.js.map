{"version":3,"sources":["../src/index.ts","../src/dbInit.ts","../src/persistance/Entity/Member.ts","../src/persistance/DAO/Sqlite/SqliteMemberDao.ts","../src/persistance/Entity/Pet.ts","../src/persistance/DAO/Sqlite/SqlitePetDao.ts","../src/persistance/Entity/Position.ts","../src/persistance/DAO/Sqlite/SqlitePositionDao.ts","../src/persistance/Entity/SubUnit.ts","../src/persistance/DAO/Sqlite/SqliteSubUnitDao.ts","../src/persistance/Entity/User.ts","../src/persistance/DAO/Sqlite/SqliteUserDao.ts","../src/persistance/DAO/Sqlite/SqliteMemberPositionDao.ts","../src/persistance/DAO/Sqlite/SqliteMemberSubUnitDao.ts","../src/http/routes/members.ts","../src/http/Controller/MemberController.ts","../src/http/routes/pets.ts","../src/http/Controller/PetController.ts","../src/http/routes/position.ts","../src/middleware/auth.ts","../src/config.ts","../src/http/Controller/PositionController.ts","../src/http/routes/sub_unit.ts","../src/http/Controller/SubUnitController.ts","../src/http/routes/authentification.ts","../src/http/Controller/AuthController.ts","../src/http/routes/user.ts","../src/http/Controller/UserController.ts"],"sourcesContent":["import express from \"express\";\nimport { initDb } from \"./dbInit.js\";\nimport { SqliteMemberDao } from \"./persistance/DAO/Sqlite/SqliteMemberDao.js\";\nimport { SqlitePetDao } from \"./persistance/DAO/Sqlite/SqlitePetDao.js\";\nimport { SqlitePositionDao } from \"./persistance/DAO/Sqlite/SqlitePositionDao.js\";\nimport { SqliteSubUnitDao } from \"./persistance/DAO/Sqlite/SqliteSubUnitDao.js\";\nimport { SqliteUserDao } from \"./persistance/DAO/Sqlite/SqliteUserDao.js\";\nimport { SqliteMemberPositionDao } from \"./persistance/DAO/Sqlite/SqliteMemberPositionDao.js\";\nimport { SqliteMemberSubUnitDao } from \"./persistance/DAO/Sqlite/SqliteMemberSubUnitDao.js\";\nimport { createMemberRouter } from \"./http/routes/members.js\";\nimport { createPetRouter } from \"./http/routes/pets.js\";\nimport { createPositionRouter } from \"./http/routes/position.js\";\nimport { createSubUnitRouter } from \"./http/routes/sub_unit.js\";\nimport { createAuthRouter } from \"./http/routes/authentification.js\";\nimport { createUserRouter } from \"./http/routes/user.js\";\n\nconst port = 3000;\n\nasync function main() {\n  const db = await initDb();\n\n  const sqliteMemberDao = new SqliteMemberDao(db);\n  const sqlitePetDao = new SqlitePetDao(db);\n  const sqlitePositionDao = new SqlitePositionDao(db);\n  const sqliteSubUnitDao = new SqliteSubUnitDao(db);\n  const sqliteUserDao = new SqliteUserDao(db);\n  const sqliteMemberPositionDao = new SqliteMemberPositionDao(db);\n  const sqliteMemberSubUnitDao = new SqliteMemberSubUnitDao(db);\n\n  const app = express();\n  app.use(express.json());\n\n  app.use(\"/api\", createMemberRouter(sqliteMemberDao));\n  app.use(\"/api\", createPetRouter(sqlitePetDao));\n  app.use(\"/api\", createAuthRouter(sqliteUserDao));\n  app.use(\"/api\", createUserRouter(sqliteUserDao));\n  app.use(\"/api\", createPositionRouter(sqlitePositionDao, sqliteMemberPositionDao));\n  app.use(\"/api\", createSubUnitRouter(sqliteSubUnitDao, sqliteMemberSubUnitDao));\n\n  app.listen(port, () => console.log(`Server running on port ${port}`));\n}\n\nmain().catch((err) => {\n  console.error(\"Fatal startup error:\", err);\n  process.exit(1);\n});\n","import sqlite3 from \"sqlite3\";\nimport { open, type Database } from \"sqlite\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nexport type SqliteDb = Database<sqlite3.Database, sqlite3.Statement>;\n\nexport async function initDb(): Promise<SqliteDb> {\n  const dbDir = path.resolve(\"./db\");\n  const dbPath = path.join(dbDir, \"skz.db\");\n\n  if (!fs.existsSync(dbDir)) {\n    fs.mkdirSync(dbDir, { recursive: true });\n  }\n\n  const db = await open({\n    filename: dbPath,\n    driver: sqlite3.Database,\n  });\n\n  await db.exec(`\n    CREATE TABLE IF NOT EXISTS Member (\n      codeMember INTEGER PRIMARY KEY NOT NULL,\n      stageName TEXT,\n      firstName TEXT,\n      lastName TEXT,\n      birthday TEXT,\n      skzoo TEXT\n    );\n  `);\n\n  await db.exec(`\n    CREATE TABLE IF NOT EXISTS Pet (\n      codePet INTEGER PRIMARY KEY NOT NULL,\n      name TEXT,\n      type TEXT,\n      birthday TEXT,\n      owner INTEGER,\n      FOREIGN KEY (owner) REFERENCES Member(codeMember)\n    );\n  `);\n\n  await db.exec(`\n    CREATE TABLE IF NOT EXISTS Position (\n      codePosition INTEGER PRIMARY KEY NOT NULL,\n      name TEXT NOT NULL\n    );\n  `);\n\n  await db.exec(`\n    CREATE TABLE IF NOT EXISTS SubUnit (\n      codeSubUnit INTEGER PRIMARY KEY NOT NULL,\n      name TEXT NOT NULL\n    );\n  `);\n\n  await db.exec(`\n    CREATE TABLE IF NOT EXISTS User (\n      id INTEGER PRIMARY KEY NOT NULL,\n      username TEXT UNIQUE NOT NULL,\n      password TEXT NOT NULL,\n      email TEXT UNIQUE NOT NULL,\n      role TEXT NOT NULL,\n      createdAt TEXT NOT NULL DEFAULT (datetime('now'))\n    );\n  `);\n\n  await db.exec(`\n    CREATE TABLE IF NOT EXISTS Member_Position (\n      memberId INTEGER NOT NULL,\n      positionId INTEGER NOT NULL,\n      PRIMARY KEY (memberId, positionId),\n      FOREIGN KEY (memberId) REFERENCES Member(codeMember) ON DELETE CASCADE,\n      FOREIGN KEY (positionId) REFERENCES Position(codePosition) ON DELETE CASCADE\n    );\n  `);\n\n  await db.exec(`\n    CREATE TABLE IF NOT EXISTS Member_SubUnit (\n      memberId INTEGER NOT NULL,\n      subUnitId INTEGER NOT NULL,\n      PRIMARY KEY (memberId, subUnitId),\n      FOREIGN KEY (memberId) REFERENCES Member(codeMember) ON DELETE CASCADE,\n      FOREIGN KEY (subUnitId) REFERENCES SubUnit(codeSubUnit) ON DELETE CASCADE\n    );\n  `);\n\n  // Idempotent seed: will not re-insert on restart\n  await db.exec(`\n    INSERT OR IGNORE INTO Member (codeMember, stageName, firstName, lastName, birthday, skzoo) VALUES\n      (1, 'BangChan', 'Christopher', 'Chahn Bahng', '10-03-1997', 'Wolf Chan'),\n      (2, 'Lee Know', 'Minho', 'Lee', '10-25-1998', 'Lee Bit'),\n      (3, 'Changbin', 'Changbin', 'Seo', '08-11-1999', 'Dwaekki'),\n      (4, 'Hyunjin', 'Hyunjin', 'Hwang', '03-20-1999', 'Jiniret'),\n      (5, 'Han', 'Jisung', 'Han', '09-14-2000', 'Han Quokka'),\n      (6, 'Felix', 'Felix', 'Lee', '09-15-2000', 'Bbokari'),\n      (7, 'Seungmin', 'Seungmin', 'Kim', '09-22-2000', 'PuppyM'),\n      (8, 'I.N', 'Jeongin', 'Yang', '02-08-2001', 'FoxI.Ny');\n  `);\n\n  await db.exec(`\n    INSERT OR IGNORE INTO Pet (codePet, name, type, birthday, owner) VALUES\n      (1, 'Berry', 'Dog (Royal King Chales Spaniel)', '12-03-2015', 1),\n      (2, 'Soonie', 'Cat (Korean Shorthair)', '01-10-2011', 2),\n      (3, 'Doongie', 'Cat (Korean Shorthair)', '09-13-2013', 2),\n      (4, 'Dori', 'Cat (Korean Shorthair)', '12-22-2018', 2),\n      (5, 'Kkami', 'Dog (Long-Haired Chihuahua)', '02-20-2015', 3),\n      (6, 'Bbama', 'Dog (Bichon Frise)', '09-01-2015', 5);\n  `);\n\n  // Minimal seed for Position/SubUnit (optional)\n  await db.exec(`\n    INSERT OR IGNORE INTO Position (codePosition, name) VALUES\n      (1, 'Leader'),\n      (2, 'Rapper'),\n      (3, 'Vocalist'),\n      (4, 'Dancer');\n  `);\n\n  await db.exec(`\n    INSERT OR IGNORE INTO SubUnit (codeSubUnit, name) VALUES\n      (1, '3RACHA'),\n      (2, 'Danceracha'),\n      (3, 'Vocalracha');\n  `);\n\n  return db;\n}\n","export class Member {\n    private _codeMember: number;\n    private _stageName: string;\n    private _firstName: string;\n    private _lastName: string;\n    private _birthday: string;\n    private _skzoo: string;\n\n    constructor(_codeMember: number, _stageName: string, _firstName: string, \n                _lastName: string, _birthday: string, _skzoo: string){\n        this._codeMember = _codeMember;\n        this._stageName = _stageName;\n        this._firstName = _firstName;\n        this._lastName = _lastName;\n        this._birthday = _birthday;\n        this._skzoo = _skzoo;\n    }\n\n    get codeMember() : number { return this._codeMember }\n    set codeMember(_codeMember : number) { this._codeMember = _codeMember}\n\n    get stageName() : string { return this._stageName }\n    set stageName(_stageName : string) { this._stageName = _stageName}\n\n    get firstName() : string { return this._firstName }\n    set firstName(_firstName : string) { this._firstName = _firstName}\n\n    get lastName() : string { return this._lastName }\n    set lastName(_lastName : string) { this._lastName = _lastName}\n\n    get birthday() : string { return this._birthday }\n    set birthday(_birthday : string) { this._birthday = _birthday}\n\n    get skzoo() : string { return this._skzoo }\n    set skzoo(_skzoo : string) { this._skzoo = _skzoo}\n}","import type { SqliteDb } from \"../../../dbInit.js\";\nimport type { MemberDao } from \"../MemberDao.js\";\nimport { Member } from \"../../Entity/Member.js\";\n\nexport class SqliteMemberDao implements MemberDao {\n  constructor(private db: SqliteDb) {}\n\n  async insert(member: Member): Promise<boolean> {\n    const r = await this.db.run(\n      `INSERT OR IGNORE INTO Member (codeMember, stageName, firstName, lastName, birthday, skzoo)\n       VALUES (?, ?, ?, ?, ?, ?);`,\n      member.codeMember,\n      member.stageName,\n      member.firstName,\n      member.lastName,\n      member.birthday,\n      member.skzoo\n    );\n    return (r.changes ?? 0) > 0;\n  }\n\n  async update(member: Member): Promise<boolean> {\n    const r = await this.db.run(\n      `UPDATE Member\n       SET stageName = ?, firstName = ?, lastName = ?, birthday = ?, skzoo = ?\n       WHERE codeMember = ?;`,\n      member.stageName,\n      member.firstName,\n      member.lastName,\n      member.birthday,\n      member.skzoo,\n      member.codeMember\n    );\n    return (r.changes ?? 0) > 0;\n  }\n\n  async delete(id: number): Promise<boolean> {\n    const r = await this.db.run(`DELETE FROM Member WHERE codeMember = ?;`, id);\n    return (r.changes ?? 0) > 0;\n  }\n\n  async findAll(): Promise<Member[]> {\n    const rows = await this.db.all<any[]>(`SELECT * FROM Member;`);\n    return rows.map(\n      (r) => new Member(r.codeMember, r.stageName, r.firstName, r.lastName, r.birthday, r.skzoo)\n    );\n  }\n\n  async findById(id: number): Promise<Member | null> {\n    const r = await this.db.get<any>(`SELECT * FROM Member WHERE codeMember = ?;`, id);\n    if (!r) return null;\n    return new Member(r.codeMember, r.stageName, r.firstName, r.lastName, r.birthday, r.skzoo);\n  }\n}\n","export class Pet {\n    private _codePet: number;\n    private _name: string;\n    private _type: string;\n    private _birthday: string;\n    private _owner: number;\n\n    constructor(_codePet: number, _name: string, _type: string, _birthday: string, _owner: number){\n        this._codePet = _codePet;\n        this._name = _name;\n        this._type = _type;\n        this._birthday = _birthday;\n        this._owner = _owner;\n    }\n\n    get codePet() : number { return this._codePet }\n    set codePet(_codePet : number) { this._codePet = _codePet}\n\n    get name() : string { return this._name }\n    set name(_name : string) { this._name = _name}\n\n    get type() : string { return this._type }\n    set type(_type : string) { this._type = _type }\n\n    get birthday() : string { return this._birthday }\n    set birthday(_birthday : string) { this._birthday = _birthday}\n\n    get owner() : number { return this._owner }\n    set owner(_owner : number) { this._owner = _owner}\n}","import type { SqliteDb } from \"../../../dbInit.js\";\nimport type { PetDao } from \"../PetDao.js\";\nimport { Pet } from \"../../Entity/Pet.js\";\n\nexport class SqlitePetDao implements PetDao {\n  constructor(private db: SqliteDb) {}\n\n  async insert(pet: Pet): Promise<boolean> {\n    const r = await this.db.run(\n      `INSERT OR IGNORE INTO Pet (codePet, name, type, birthday, owner)\n       VALUES (?, ?, ?, ?, ?);`,\n      pet.codePet,\n      pet.name,\n      pet.type,\n      pet.birthday,\n      pet.owner\n    );\n    return (r.changes ?? 0) > 0;\n  }\n\n  async update(pet: Pet): Promise<boolean> {\n    const r = await this.db.run(\n      `UPDATE Pet\n       SET name = ?, type = ?, birthday = ?, owner = ?\n       WHERE codePet = ?;`,\n      pet.name,\n      pet.type,\n      pet.birthday,\n      pet.owner,\n      pet.codePet\n    );\n    return (r.changes ?? 0) > 0;\n  }\n\n  async delete(id: number): Promise<boolean> {\n    const r = await this.db.run(`DELETE FROM Pet WHERE codePet = ?;`, id);\n    return (r.changes ?? 0) > 0;\n  }\n\n  async findAll(): Promise<Pet[]> {\n    const rows = await this.db.all<any[]>(`SELECT * FROM Pet;`);\n    return rows.map((r) => new Pet(r.codePet, r.name, r.type, r.birthday, r.owner));\n  }\n\n  async findById(id: number): Promise<Pet | null> {\n    const r = await this.db.get<any>(`SELECT * FROM Pet WHERE codePet = ?;`, id);\n    if (!r) return null;\n    return new Pet(r.codePet, r.name, r.type, r.birthday, r.owner);\n  }\n\n  async findByMember(memberId: number): Promise<Pet[]> {\n    const rows = await this.db.all<any[]>(`SELECT * FROM Pet WHERE owner = ?;`, memberId);\n    return rows.map((r) => new Pet(r.codePet, r.name, r.type, r.birthday, r.owner));\n  }\n}\n","export class Position{\n    private _codePosition : number;\n    private _name : string;\n\n    constructor( _codePosition : number, _name : string ){\n        this._codePosition = _codePosition;\n        this._name = _name;\n    }\n\n    get codePosition() : number { return this._codePosition }\n    set codePosition(_codePosition : number) { this._codePosition = _codePosition}\n\n    get name() : string { return this._name }\n    set name(_name : string) { this._name = _name}\n}","import type { SqliteDb } from \"../../../dbInit.js\";\nimport type { PositionDao } from \"../PositionDao.js\";\nimport { Position } from \"../../Entity/Position.js\";\n\nexport class SqlitePositionDao implements PositionDao {\n  constructor(private db: SqliteDb) {}\n\n  async insert(position: Position): Promise<boolean> {\n    const r = await this.db.run(\n      `INSERT OR IGNORE INTO Position (codePosition, name) VALUES (?, ?);`,\n      position.codePosition,\n      position.name\n    );\n    return (r.changes ?? 0) > 0;\n  }\n\n  async update(position: Position): Promise<boolean> {\n    const r = await this.db.run(\n      `UPDATE Position SET name = ? WHERE codePosition = ?;`,\n      position.name,\n      position.codePosition\n    );\n    return (r.changes ?? 0) > 0;\n  }\n\n  async delete(id: number): Promise<boolean> {\n    const r = await this.db.run(`DELETE FROM Position WHERE codePosition = ?;`, id);\n    return (r.changes ?? 0) > 0;\n  }\n\n  async findAll(): Promise<Position[]> {\n    const rows = await this.db.all<any[]>(`SELECT * FROM Position;`);\n    return rows.map((r) => new Position(r.codePosition, r.name));\n  }\n\n  async findById(id: number): Promise<Position | null> {\n    const r = await this.db.get<any>(`SELECT * FROM Position WHERE codePosition = ?;`, id);\n    if (!r) return null;\n    return new Position(r.codePosition, r.name);\n  }\n}\n","export class SubUnit{\n    private _codeSubUnit : number;\n    private _name : string;\n\n    constructor( _codeSubUnit : number, _name : string ){\n        this._codeSubUnit = _codeSubUnit;\n        this._name = _name;\n    }\n\n    get codeSubUnit() : number { return this._codeSubUnit }\n    set codeSubUnit(_codeSubUnit : number) { this._codeSubUnit = _codeSubUnit}\n\n    get name() : string { return this._name }\n    set name(_name : string) { this._name = _name}\n}","import type { SqliteDb } from \"../../../dbInit.js\";\nimport type { SubUnitDao } from \"../SubUnitDao.js\";\nimport { SubUnit } from \"../../Entity/SubUnit.js\";\n\nexport class SqliteSubUnitDao implements SubUnitDao {\n  constructor(private db: SqliteDb) {}\n\n  async insert(subUnit: SubUnit): Promise<boolean> {\n    const r = await this.db.run(\n      `INSERT OR IGNORE INTO SubUnit (codeSubUnit, name) VALUES (?, ?);`,\n      subUnit.codeSubUnit,\n      subUnit.name\n    );\n    return (r.changes ?? 0) > 0;\n  }\n\n  async update(subUnit: SubUnit): Promise<boolean> {\n    const r = await this.db.run(\n      `UPDATE SubUnit SET name = ? WHERE codeSubUnit = ?;`,\n      subUnit.name,\n      subUnit.codeSubUnit\n    );\n    return (r.changes ?? 0) > 0;\n  }\n\n  async delete(id: number): Promise<boolean> {\n    const r = await this.db.run(`DELETE FROM SubUnit WHERE codeSubUnit = ?;`, id);\n    return (r.changes ?? 0) > 0;\n  }\n\n  async findAll(): Promise<SubUnit[]> {\n    const rows = await this.db.all<any[]>(`SELECT * FROM SubUnit;`);\n    return rows.map((r) => new SubUnit(r.codeSubUnit, r.name));\n  }\n\n  async findById(id: number): Promise<SubUnit | null> {\n    const r = await this.db.get<any>(`SELECT * FROM SubUnit WHERE codeSubUnit = ?;`, id);\n    if (!r) return null;\n    return new SubUnit(r.codeSubUnit, r.name);\n  }\n}\n","export enum UserRole {\r\n    ADMIN = 'admin',\r\n    USER = 'user'\r\n}\r\n\r\nexport class User {\r\n    private _id: number;\r\n    private _username: string;\r\n    private _password: string;\r\n    private _email: string;\r\n    private _role: UserRole;\r\n    private _createdAt: string;\r\n\r\n    constructor(\r\n        id: number,\r\n        username: string,\r\n        password: string,\r\n        email: string,\r\n        role: UserRole = UserRole.USER,\r\n        createdAt: string = new Date().toISOString()\r\n    ) {\r\n        this._id = id;\r\n        this._username = username;\r\n        this._password = password;\r\n        this._email = email;\r\n        this._role = role;\r\n        this._createdAt = createdAt;\r\n    }\r\n\r\n    get id(): number { return this._id; }\r\n    set id(id: number) { this._id = id; }\r\n\r\n    get username(): string { return this._username; }\r\n    set username(username: string) { this._username = username; }\r\n\r\n    get password(): string { return this._password; }\r\n    set password(password: string) { this._password = password; }\r\n\r\n    get email(): string { return this._email; }\r\n    set email(email: string) { this._email = email; }\r\n\r\n    get role(): UserRole { return this._role; }\r\n    set role(role: UserRole) { this._role = role; }\r\n\r\n    get createdAt(): string { return this._createdAt; }\r\n    set createdAt(createdAt: string) { this._createdAt = createdAt; }\r\n\r\n    // MÃ©thode pour retourner l'utilisateur sans le mot de passe\r\n    toSafeObject() {\r\n        return {\r\n            id: this._id,\r\n            username: this._username,\r\n            email: this._email,\r\n            role: this._role,\r\n            createdAt: this._createdAt\r\n        };\r\n    }\r\n}","import type { SqliteDb } from \"../../../dbInit.js\";\nimport type { UserDao } from \"../UserDao.js\";\nimport { User } from \"../../Entity/User.js\";\n\nexport class SqliteUserDao implements UserDao {\n  constructor(private db: SqliteDb) {}\n\n  async insert(user: User): Promise<boolean> {\n    const r = await this.db.run(\n      `INSERT OR IGNORE INTO User (id, username, password, email, role, createdAt)\n       VALUES (?, ?, ?, ?, ?, ?);`,\n      user.id,\n      user.username,\n      user.password,\n      user.email,\n      user.role,\n      user.createdAt\n    );\n    return (r.changes ?? 0) > 0;\n  }\n\n  async update(user: User): Promise<boolean> {\n    const r = await this.db.run(\n      `UPDATE User\n       SET username = ?, password = ?, email = ?, role = ?\n       WHERE id = ?;`,\n      user.username,\n      user.password,\n      user.email,\n      user.role,\n      user.id\n    );\n    return (r.changes ?? 0) > 0;\n  }\n\n  async delete(id: number): Promise<boolean> {\n    const r = await this.db.run(`DELETE FROM User WHERE id = ?;`, id);\n    return (r.changes ?? 0) > 0;\n  }\n\n  async findAll(): Promise<User[]> {\n    const rows = await this.db.all<any[]>(`SELECT * FROM User;`);\n    return rows.map((r) => new User(r.id, r.username, r.password, r.email, r.role, r.createdAt));\n  }\n\n  async findById(id: number): Promise<User | null> {\n    const r = await this.db.get<any>(`SELECT * FROM User WHERE id = ?;`, id);\n    if (!r) return null;\n    return new User(r.id, r.username, r.password, r.email, r.role, r.createdAt);\n  }\n\n  async findByUsername(username: string): Promise<User | null> {\n    const r = await this.db.get<any>(`SELECT * FROM User WHERE username = ?;`, username);\n    if (!r) return null;\n    return new User(r.id, r.username, r.password, r.email, r.role, r.createdAt);\n  }\n\n  async findByEmail(email: string): Promise<User | null> {\n    const r = await this.db.get<any>(`SELECT * FROM User WHERE email = ?;`, email);\n    if (!r) return null;\n    return new User(r.id, r.username, r.password, r.email, r.role, r.createdAt);\n  }\n}\n","import type { SqliteDb } from \"../../../dbInit.js\";\nimport type { MemberPositionDao } from \"../MemberPositionDao.js\";\nimport { Position } from \"../../Entity/Position.js\";\n\nexport class SqliteMemberPositionDao implements MemberPositionDao {\n  constructor(private db: SqliteDb) {}\n\n  async add(memberId: number, positionId: number): Promise<boolean> {\n    const r = await this.db.run(\n      `INSERT OR IGNORE INTO Member_Position (memberId, positionId) VALUES (?, ?);`,\n      memberId,\n      positionId\n    );\n    return (r.changes ?? 0) > 0;\n  }\n\n  async remove(memberId: number, positionId: number): Promise<boolean> {\n    const r = await this.db.run(\n      `DELETE FROM Member_Position WHERE memberId = ? AND positionId = ?;`,\n      memberId,\n      positionId\n    );\n    return (r.changes ?? 0) > 0;\n  }\n\n  async findPositionsByMember(memberId: number): Promise<Position[]> {\n    const rows = await this.db.all<any[]>(\n      `SELECT p.* FROM Position p\n       INNER JOIN Member_Position mp ON mp.positionId = p.codePosition\n       WHERE mp.memberId = ?;`,\n      memberId\n    );\n    return rows.map((r) => new Position(r.codePosition, r.name));\n  }\n\n  async findMembersByPosition(positionId: number): Promise<number[]> {\n    const rows = await this.db.all<any[]>(\n      `SELECT memberId FROM Member_Position WHERE positionId = ?;`,\n      positionId\n    );\n    return rows.map((r) => r.memberId as number);\n  }\n}\n","import type { SqliteDb } from \"../../../dbInit.js\";\nimport type { MemberSubUnitDao } from \"../MemberSubUnitDao.js\";\nimport { SubUnit } from \"../../Entity/SubUnit.js\";\n\nexport class SqliteMemberSubUnitDao implements MemberSubUnitDao {\n  constructor(private db: SqliteDb) {}\n\n  async add(memberId: number, subUnitId: number): Promise<boolean> {\n    const r = await this.db.run(\n      `INSERT OR IGNORE INTO Member_SubUnit (memberId, subUnitId) VALUES (?, ?);`,\n      memberId,\n      subUnitId\n    );\n    return (r.changes ?? 0) > 0;\n  }\n\n  async remove(memberId: number, subUnitId: number): Promise<boolean> {\n    const r = await this.db.run(\n      `DELETE FROM Member_SubUnit WHERE memberId = ? AND subUnitId = ?;`,\n      memberId,\n      subUnitId\n    );\n    return (r.changes ?? 0) > 0;\n  }\n\n  async findSubUnitsByMember(memberId: number): Promise<SubUnit[]> {\n    const rows = await this.db.all<any[]>(\n      `SELECT s.* FROM SubUnit s\n       INNER JOIN Member_SubUnit ms ON ms.subUnitId = s.codeSubUnit\n       WHERE ms.memberId = ?;`,\n      memberId\n    );\n    return rows.map((r) => new SubUnit(r.codeSubUnit, r.name));\n  }\n\n  async findMembersBySubUnit(subUnitId: number): Promise<number[]> {\n    const rows = await this.db.all<any[]>(\n      `SELECT memberId FROM Member_SubUnit WHERE subUnitId = ?;`,\n      subUnitId\n    );\n    return rows.map((r) => r.memberId as number);\n  }\n}\n","import express from 'express';\nimport type { MemberDao } from '../../persistance/DAO/MemberDao.js';\nimport { MemberController } from '../Controller/MemberController.js';\n\n\nexport function createMemberRouter(memberDao: MemberDao) {\n    const memberController = new MemberController(memberDao);\n\n    const router = express.Router();\n\n    router.get('/members', memberController.findAll);\n    router.get('/members/:id', memberController.findById);\n    router.post('/members', memberController.insert);\n    router.put('/members/:id', memberController.update);\n    router.delete('/members/:id', memberController.delete);\n\n    return router;\n}\n","import type { Request, Response } from \"express\";\nimport type { MemberDao } from \"../../persistance/DAO/MemberDao.js\";\nimport { Member } from \"../../persistance/Entity/Member.js\";\n\nexport class MemberController {\n  constructor(private memberDao: MemberDao) {}\n\n  public findAll = async (_req: Request, res: Response) => {\n    try {\n      const members = await this.memberDao.findAll();\n      res.json(members);\n    } catch (error) {\n      res.status(500).json({ error: \"Unable to retrieve members\" });\n    }\n  };\n\n  public findById = async (req: Request, res: Response) => {\n    try {\n      const id = Number(req.params.id);\n      if (Number.isNaN(id)) return res.status(400).json({ error: \"Invalid member ID\" });\n\n      const member = await this.memberDao.findById(id);\n      if (!member) return res.status(404).json({ message: \"Member not found\" });\n      res.json(member);\n    } catch {\n      res.status(500).json({ error: \"Unable to retrieve member\" });\n    }\n  };\n\n  public insert = async (req: Request, res: Response) => {\n    try {\n      const { id, stageName, firstName, lastName, birthday, skzoo } = req.body;\n\n      // If you allow client-specified IDs, use it. Otherwise generate externally.\n      const codeMember = id ?? undefined;\n      if (codeMember === undefined) {\n        // Minimal strategy: MAX+1\n        const all = await this.memberDao.findAll();\n        const newId = all.length ? Math.max(...all.map((m) => m.codeMember)) + 1 : 1;\n        const member = new Member(newId, stageName, firstName, lastName, birthday, skzoo);\n        const ok = await this.memberDao.insert(member);\n        if (!ok) return res.status(500).json({ error: \"Failed to create member\" });\n        return res.status(201).json({ message: \"Member created successfully\", member });\n      }\n\n      const member = new Member(codeMember, stageName, firstName, lastName, birthday, skzoo);\n      const ok = await this.memberDao.insert(member);\n      if (!ok) return res.status(500).json({ error: \"Failed to create member\" });\n\n      res.status(201).json({ message: \"Member created successfully\", member });\n    } catch (error) {\n      res.status(500).json({ error: \"Unable to create member\" });\n    }\n  };\n\n  public update = async (req: Request, res: Response) => {\n    try {\n      const id = Number(req.params.id);\n      if (Number.isNaN(id)) return res.status(400).json({ error: \"Invalid member ID\" });\n\n      const existing = await this.memberDao.findById(id);\n      if (!existing) return res.status(404).json({ message: \"Member not found\" });\n\n      const { stageName, firstName, lastName, birthday, skzoo } = req.body;\n      const updated = new Member(id, stageName, firstName, lastName, birthday, skzoo);\n\n      const ok = await this.memberDao.update(updated);\n      if (!ok) return res.status(500).json({ error: \"Failed to update member\" });\n\n      res.json({ message: \"Member updated successfully\", member: updated });\n    } catch {\n      res.status(500).json({ error: \"Unable to update member\" });\n    }\n  };\n\n  public delete = async (req: Request, res: Response) => {\n    try {\n      const id = Number(req.params.id);\n      if (Number.isNaN(id)) return res.status(400).json({ error: \"Invalid member ID\" });\n\n      const ok = await this.memberDao.delete(id);\n      if (!ok) return res.status(404).json({ message: \"Member not found\" });\n      res.json({ message: \"Member deleted successfully\" });\n    } catch {\n      res.status(500).json({ error: \"Unable to delete member\" });\n    }\n  };\n}\n","import express from \"express\";\nimport type { PetDao } from \"../../persistance/DAO/PetDao.js\";\nimport { PetController } from \"../Controller/PetController.js\";\n\nexport function createPetRouter(petDao: PetDao) {\n  const router = express.Router();\n  const controller = new PetController(petDao);\n\n  router.get(\"/pets\", controller.findAll);\n  router.get(\"/pets/:id\", controller.findById);\n  router.get(\"/pets/owner/:ownerId\", controller.findByOwner);\n  router.post(\"/pets\", controller.insert);\n  router.put(\"/pets/:id\", controller.update);\n  router.delete(\"/pets/:id\", controller.delete);\n\n  return router;\n}\n","import type { Request, Response } from \"express\";\nimport type { PetDao } from \"../../persistance/DAO/PetDao.js\";\nimport { Pet } from \"../../persistance/Entity/Pet.js\";\n\nexport class PetController {\n  constructor(private petDao: PetDao) {}\n\n  public findAll = async (_req: Request, res: Response) => {\n    try {\n      const pets = await this.petDao.findAll();\n      res.json(pets);\n    } catch {\n      res.status(500).json({ error: \"Unable to retrieve pets\" });\n    }\n  };\n\n  public findById = async (req: Request, res: Response) => {\n    try {\n      const id = Number(req.params.id);\n      if (Number.isNaN(id)) return res.status(400).json({ error: \"Invalid pet ID\" });\n      const pet = await this.petDao.findById(id);\n      if (!pet) return res.status(404).json({ message: \"Pet not found\" });\n      res.json(pet);\n    } catch {\n      res.status(500).json({ error: \"Unable to retrieve pet\" });\n    }\n  };\n\n  public findByOwner = async (req: Request, res: Response) => {\n    try {\n      const ownerId = Number(req.params.ownerId);\n      if (Number.isNaN(ownerId)) return res.status(400).json({ error: \"Invalid owner ID\" });\n      const pets = await this.petDao.findByMember(ownerId);\n      res.json(pets);\n    } catch {\n      res.status(500).json({ error: \"Unable to retrieve pets\" });\n    }\n  };\n\n  public insert = async (req: Request, res: Response) => {\n    try {\n      const { id, name, type, birthday, owner } = req.body;\n\n      const all = await this.petDao.findAll();\n      const newId = id ?? (all.length ? Math.max(...all.map((p) => p.codePet)) + 1 : 1);\n\n      const pet = new Pet(newId, name, type, birthday, owner);\n      const ok = await this.petDao.insert(pet);\n      if (!ok) return res.status(500).json({ error: \"Failed to create pet\" });\n\n      res.status(201).json({ message: \"Pet created successfully\", pet });\n    } catch {\n      res.status(500).json({ error: \"Unable to create pet\" });\n    }\n  };\n\n  public update = async (req: Request, res: Response) => {\n    try {\n      const id = Number(req.params.id);\n      if (Number.isNaN(id)) return res.status(400).json({ error: \"Invalid pet ID\" });\n\n      const existing = await this.petDao.findById(id);\n      if (!existing) return res.status(404).json({ message: \"Pet not found\" });\n\n      const { name, type, birthday, owner } = req.body;\n      const updated = new Pet(id, name, type, birthday, owner);\n      const ok = await this.petDao.update(updated);\n      if (!ok) return res.status(500).json({ error: \"Failed to update pet\" });\n\n      res.json({ message: \"Pet updated successfully\", pet: updated });\n    } catch {\n      res.status(500).json({ error: \"Unable to update pet\" });\n    }\n  };\n\n  public delete = async (req: Request, res: Response) => {\n    try {\n      const id = Number(req.params.id);\n      if (Number.isNaN(id)) return res.status(400).json({ error: \"Invalid pet ID\" });\n      const ok = await this.petDao.delete(id);\n      if (!ok) return res.status(404).json({ message: \"Pet not found\" });\n      res.json({ message: \"Pet deleted successfully\" });\n    } catch {\n      res.status(500).json({ error: \"Unable to delete pet\" });\n    }\n  };\n}\n","import express from \"express\";\nimport type { PositionDao } from \"../../persistance/DAO/PositionDao.js\";\nimport type { MemberPositionDao } from \"../../persistance/DAO/MemberPositionDao.js\";\nimport { authenticateToken, authorizeRoles } from \"../../middleware/auth.js\";\nimport { UserRole } from \"../../persistance/Entity/User.js\";\nimport { PositionController } from \"../Controller/PositionController.js\";\n\nexport function createPositionRouter(positionDao: PositionDao, memberPositionDao: MemberPositionDao) {\n  const router = express.Router();\n  const controller = new PositionController(positionDao, memberPositionDao);\n\n  router.get(\"/positions\", authenticateToken, controller.findAll);\n  router.get(\"/positions/:id\", authenticateToken, controller.findById);\n\n  router.post(\"/positions\", authenticateToken, authorizeRoles(UserRole.ADMIN), controller.insert);\n  router.put(\"/positions/:id\", authenticateToken, authorizeRoles(UserRole.ADMIN), controller.update);\n  router.delete(\"/positions/:id\", authenticateToken, authorizeRoles(UserRole.ADMIN), controller.delete);\n\n  router.post(\n    \"/positions/:id/members/:memberId\",\n    authenticateToken,\n    authorizeRoles(UserRole.ADMIN),\n    controller.addMember\n  );\n\n  router.delete(\n    \"/positions/:id/members/:memberId\",\n    authenticateToken,\n    authorizeRoles(UserRole.ADMIN),\n    controller.removeMember\n  );\n\n  router.get(\"/positions/:id/members\", authenticateToken, controller.members);\n\n  return router;\n}\n","import type { Request, Response, NextFunction } from \"express\";\r\nimport jwt, { type JwtPayload, type SignOptions } from \"jsonwebtoken\";\r\nimport { config } from \"../config.js\";\r\nimport { UserRole } from \"../persistance/Entity/User.js\";\r\n\r\n/**\r\n * Make req.user exist (single-file simplest approach).\r\n * Note: no export here; it's a global augmentation.\r\n */\r\ndeclare global {\r\n  namespace Express {\r\n    interface Request {\r\n      user?: {\r\n        id: number;\r\n        username: string;\r\n        role: UserRole;\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Your app's JWT payload (extends the standard JWT payload).\r\n */\r\nexport type CustomJwtPayload = JwtPayload & {\r\n  id: number;\r\n  username: string;\r\n  role: UserRole;\r\n};\r\n\r\nfunction requireJwtSecret(): string {\r\n  const secret = config.jwt.secret;\r\n  if (!secret) throw new Error(\"JWT secret is not configured\");\r\n  return secret;\r\n}\r\n\r\n/**\r\n * JWT authentication middleware\r\n */\r\nexport const authenticateToken = (req: Request, res: Response, next: NextFunction): void => {\r\n  const authHeader = req.headers.authorization;\r\n  const token = authHeader?.startsWith(\"Bearer \") ? authHeader.slice(7) : undefined;\r\n\r\n  if (!token) {\r\n    res.status(401).json({ error: \"Access token required\" });\r\n    return;\r\n  }\r\n\r\n  let secret: string;\r\n  try {\r\n    secret = requireJwtSecret();\r\n  } catch {\r\n    res.status(500).json({ error: \"JWT secret is not configured\" });\r\n    return;\r\n  }\r\n\r\n  jwt.verify(token, secret, (err, decoded) => {\r\n    if (err) {\r\n      if (err instanceof jwt.TokenExpiredError) {\r\n        res.status(401).json({ error: \"Token expired\" });\r\n        return;\r\n      }\r\n      if (err instanceof jwt.JsonWebTokenError) {\r\n        res.status(403).json({ error: \"Invalid token\" });\r\n        return;\r\n      }\r\n      res.status(500).json({ error: \"Token verification failed\" });\r\n      return;\r\n    }\r\n\r\n    const payload = decoded as unknown as CustomJwtPayload;\r\n\r\n    req.user = {\r\n      id: payload.id,\r\n      username: payload.username,\r\n      role: payload.role,\r\n    };\r\n\r\n    next();\r\n  });\r\n};\r\n\r\n/**\r\n * Role-based authorization middleware\r\n */\r\nexport const authorizeRoles = (...roles: UserRole[]) => {\r\n  return (req: Request, res: Response, next: NextFunction): void => {\r\n    if (!req.user) {\r\n      res.status(401).json({ error: \"Authentication required\" });\r\n      return;\r\n    }\r\n\r\n    if (!roles.includes(req.user.role)) {\r\n      res.status(403).json({\r\n        error: \"Access forbidden\",\r\n        message: `You need one of the following roles: ${roles.join(\", \")}`,\r\n      });\r\n      return;\r\n    }\r\n\r\n    next();\r\n  };\r\n};\r\n\r\n/**\r\n * Authorize owner or admin\r\n */\r\nexport const authorizeOwnerOrAdmin = (req: Request, res: Response, next: NextFunction): void => {\r\n  if (!req.user) {\r\n    res.status(401).json({ error: \"Authentication required\" });\r\n    return;\r\n  }\r\n\r\n  const requestedUserId = Number(req.params.id);\r\n  if (Number.isNaN(requestedUserId)) {\r\n    res.status(400).json({ error: \"Invalid ID parameter\" });\r\n    return;\r\n  }\r\n\r\n  if (req.user.role === UserRole.ADMIN || req.user.id === requestedUserId) {\r\n    next();\r\n    return;\r\n  }\r\n\r\n  res.status(403).json({\r\n    error: \"Access forbidden\",\r\n    message: \"You can only access your own resources\",\r\n  });\r\n};\r\n\r\n/**\r\n * Generate access token\r\n */\r\nexport const generateToken = (payload: Pick<CustomJwtPayload, \"id\" | \"username\" | \"role\">): string => {\r\n  const secret = requireJwtSecret();\r\n\r\n  const options: SignOptions = {\r\n    expiresIn: config.jwt.expiresIn as SignOptions[\"expiresIn\"],\r\n  };\r\n\r\n  return jwt.sign(payload, secret, options);\r\n};\r\n\r\n/**\r\n * Generate refresh token\r\n */\r\nexport const generateRefreshToken = (\r\n  payload: Pick<CustomJwtPayload, \"id\" | \"username\" | \"role\">\r\n): string => {\r\n  const secret = requireJwtSecret();\r\n\r\n  const options: SignOptions = {\r\n    expiresIn: config.jwt.refreshExpiresIn as SignOptions[\"expiresIn\"],\r\n  };\r\n\r\n  return jwt.sign(payload, secret, options);\r\n};\r\n\r\n/**\r\n * Verify and decode refresh token\r\n */\r\nexport const verifyRefreshToken = (token: string): CustomJwtPayload | null => {\r\n  try {\r\n    const secret = requireJwtSecret();\r\n    return jwt.verify(token, secret) as unknown as CustomJwtPayload;\r\n  } catch {\r\n    return null;\r\n  }\r\n};\r\n","import dotenv from 'dotenv';\r\ndotenv.config();\r\n\r\nexport const config = {\r\n    // JWT Configuration\r\n    jwt: {\r\n        secret: process.env.JWT_SECRET,\r\n        expiresIn: '1h', // Token expires in 1 hour\r\n        refreshExpiresIn: '7d' // Refresh token expires in 7 days\r\n    },\r\n\r\n    // Database Configuration\r\n    database: {\r\n        filename: './db/skz.db'\r\n    },\r\n\r\n    // Server Configuration\r\n    server: {\r\n        port: process.env.PORT || 3000,\r\n        host: process.env.HOST || 'localhost'\r\n    },\r\n\r\n    // Security\r\n    security: {\r\n        bcryptRounds: 10, // Number of salt rounds for bcrypt\r\n        maxLoginAttempts: 5,\r\n        lockoutTime: 15 * 60 * 1000 // 15 minutes in milliseconds\r\n    }\r\n};","import type { Request, Response } from \"express\";\nimport type { PositionDao } from \"../../persistance/DAO/PositionDao.js\";\nimport type { MemberPositionDao } from \"../../persistance/DAO/MemberPositionDao.js\";\nimport { Position } from \"../../persistance/Entity/Position.js\";\n\nexport class PositionController {\n  constructor(private positions: PositionDao, private memberPositions: MemberPositionDao) {}\n\n  findAll = async (_: Request, res: Response) => {\n    try {\n      res.json(await this.positions.findAll());\n    } catch {\n      res.status(500).json({ error: \"Unable to retrieve positions\" });\n    }\n  };\n\n  findById = async (req: Request, res: Response) => {\n    try {\n      const id = Number(req.params.id);\n      if (Number.isNaN(id)) return res.status(400).json({ error: \"Invalid position ID\" });\n      const position = await this.positions.findById(id);\n      if (!position) return res.status(404).json({ error: \"Position not found\" });\n      res.json(position);\n    } catch {\n      res.status(500).json({ error: \"Unable to retrieve position\" });\n    }\n  };\n\n  insert = async (req: Request, res: Response) => {\n    try {\n      const { id, name } = req.body;\n      if (!name) return res.status(400).json({ error: \"Name is required\" });\n\n      const all = await this.positions.findAll();\n      const newId = id ?? (all.length ? Math.max(...all.map((p) => p.codePosition)) + 1 : 1);\n\n      const position = new Position(newId, name);\n      const ok = await this.positions.insert(position);\n      if (!ok) return res.status(500).json({ error: \"Failed to create position\" });\n      res.status(201).json({ message: \"Position created successfully\", position });\n    } catch {\n      res.status(500).json({ error: \"Unable to create position\" });\n    }\n  };\n\n  update = async (req: Request, res: Response) => {\n    try {\n      const id = Number(req.params.id);\n      if (Number.isNaN(id)) return res.status(400).json({ error: \"Invalid position ID\" });\n      const existing = await this.positions.findById(id);\n      if (!existing) return res.status(404).json({ error: \"Position not found\" });\n\n      const { name } = req.body;\n      const updated = new Position(id, name ?? existing.name);\n      const ok = await this.positions.update(updated);\n      if (!ok) return res.status(500).json({ error: \"Failed to update position\" });\n      res.json({ message: \"Position updated successfully\", position: updated });\n    } catch {\n      res.status(500).json({ error: \"Unable to update position\" });\n    }\n  };\n\n  delete = async (req: Request, res: Response) => {\n    try {\n      const id = Number(req.params.id);\n      if (Number.isNaN(id)) return res.status(400).json({ error: \"Invalid position ID\" });\n      const ok = await this.positions.delete(id);\n      if (!ok) return res.status(404).json({ error: \"Position not found\" });\n      res.json({ message: \"Position deleted successfully\" });\n    } catch {\n      res.status(500).json({ error: \"Unable to delete position\" });\n    }\n  };\n\n  addMember = async (req: Request, res: Response) => {\n    try {\n      const positionId = Number(req.params.id);\n      const memberId = Number(req.params.memberId);\n      if (Number.isNaN(positionId) || Number.isNaN(memberId)) {\n        return res.status(400).json({ error: \"Invalid position or member ID\" });\n      }\n      const ok = await this.memberPositions.add(memberId, positionId);\n      if (!ok) return res.status(500).json({ error: \"Failed to add member to position\" });\n      res.json({ message: \"Member added to position successfully\" });\n    } catch {\n      res.status(500).json({ error: \"Unable to add member to position\" });\n    }\n  };\n\n  removeMember = async (req: Request, res: Response) => {\n    try {\n      const positionId = Number(req.params.id);\n      const memberId = Number(req.params.memberId);\n      if (Number.isNaN(positionId) || Number.isNaN(memberId)) {\n        return res.status(400).json({ error: \"Invalid position or member ID\" });\n      }\n      const ok = await this.memberPositions.remove(memberId, positionId);\n      if (!ok) return res.status(404).json({ error: \"Member not in this position\" });\n      res.json({ message: \"Member removed from position successfully\" });\n    } catch {\n      res.status(500).json({ error: \"Unable to remove member from position\" });\n    }\n  };\n\n  members = async (req: Request, res: Response) => {\n    try {\n      const positionId = Number(req.params.id);\n      if (Number.isNaN(positionId)) return res.status(400).json({ error: \"Invalid position ID\" });\n      const memberIds = await this.memberPositions.findMembersByPosition(positionId);\n      res.json({ positionId, memberIds });\n    } catch {\n      res.status(500).json({ error: \"Unable to retrieve members\" });\n    }\n  };\n}\n","import express from \"express\";\nimport type { SubUnitDao } from \"../../persistance/DAO/SubUnitDao.js\";\nimport type { MemberSubUnitDao } from \"../../persistance/DAO/MemberSubUnitDao.js\";\nimport { authenticateToken, authorizeRoles } from \"../../middleware/auth.js\";\nimport { UserRole } from \"../../persistance/Entity/User.js\";\nimport { SubUnitController } from \"../Controller/SubUnitController.js\";\n\nexport function createSubUnitRouter(subUnitDao: SubUnitDao, memberSubUnitDao: MemberSubUnitDao) {\n  const router = express.Router();\n  const controller = new SubUnitController(subUnitDao, memberSubUnitDao);\n\n  router.get(\"/sub-units\", authenticateToken, controller.findAll);\n  router.get(\"/sub-units/:id\", authenticateToken, controller.findById);\n\n  router.post(\"/sub-units\", authenticateToken, authorizeRoles(UserRole.ADMIN), controller.insert);\n  router.put(\"/sub-units/:id\", authenticateToken, authorizeRoles(UserRole.ADMIN), controller.update);\n  router.delete(\"/sub-units/:id\", authenticateToken, authorizeRoles(UserRole.ADMIN), controller.delete);\n\n  router.post(\n    \"/sub-units/:id/members/:memberId\",\n    authenticateToken,\n    authorizeRoles(UserRole.ADMIN),\n    controller.addMember\n  );\n\n  router.delete(\n    \"/sub-units/:id/members/:memberId\",\n    authenticateToken,\n    authorizeRoles(UserRole.ADMIN),\n    controller.removeMember\n  );\n\n  router.get(\"/sub-units/:id/members\", authenticateToken, controller.members);\n\n  return router;\n}\n","import type { Request, Response } from \"express\";\nimport type { SubUnitDao } from \"../../persistance/DAO/SubUnitDao.js\";\nimport type { MemberSubUnitDao } from \"../../persistance/DAO/MemberSubUnitDao.js\";\nimport { SubUnit } from \"../../persistance/Entity/SubUnit.js\";\n\nexport class SubUnitController {\n  constructor(private subUnits: SubUnitDao, private memberSubUnits: MemberSubUnitDao) {}\n\n  findAll = async (_: Request, res: Response) => {\n    try {\n      res.json(await this.subUnits.findAll());\n    } catch {\n      res.status(500).json({ error: \"Unable to retrieve sub-units\" });\n    }\n  };\n\n  findById = async (req: Request, res: Response) => {\n    try {\n      const id = Number(req.params.id);\n      if (Number.isNaN(id)) return res.status(400).json({ error: \"Invalid sub-unit ID\" });\n      const subUnit = await this.subUnits.findById(id);\n      if (!subUnit) return res.status(404).json({ error: \"Sub-unit not found\" });\n      res.json(subUnit);\n    } catch {\n      res.status(500).json({ error: \"Unable to retrieve sub-unit\" });\n    }\n  };\n\n  insert = async (req: Request, res: Response) => {\n    try {\n      const { id, name } = req.body;\n      if (!name) return res.status(400).json({ error: \"Name is required\" });\n\n      const all = await this.subUnits.findAll();\n      const newId = id ?? (all.length ? Math.max(...all.map((s) => s.codeSubUnit)) + 1 : 1);\n      const subUnit = new SubUnit(newId, name);\n\n      const ok = await this.subUnits.insert(subUnit);\n      if (!ok) return res.status(500).json({ error: \"Failed to create sub-unit\" });\n      res.status(201).json({ message: \"Sub-unit created successfully\", subUnit });\n    } catch {\n      res.status(500).json({ error: \"Unable to create sub-unit\" });\n    }\n  };\n\n  update = async (req: Request, res: Response) => {\n    try {\n      const id = Number(req.params.id);\n      if (Number.isNaN(id)) return res.status(400).json({ error: \"Invalid sub-unit ID\" });\n      const existing = await this.subUnits.findById(id);\n      if (!existing) return res.status(404).json({ error: \"Sub-unit not found\" });\n\n      const { name } = req.body;\n      const updated = new SubUnit(id, name ?? existing.name);\n\n      const ok = await this.subUnits.update(updated);\n      if (!ok) return res.status(500).json({ error: \"Failed to update sub-unit\" });\n      res.json({ message: \"Sub-unit updated successfully\", subUnit: updated });\n    } catch {\n      res.status(500).json({ error: \"Unable to update sub-unit\" });\n    }\n  };\n\n  delete = async (req: Request, res: Response) => {\n    try {\n      const id = Number(req.params.id);\n      if (Number.isNaN(id)) return res.status(400).json({ error: \"Invalid sub-unit ID\" });\n      const ok = await this.subUnits.delete(id);\n      if (!ok) return res.status(404).json({ error: \"Sub-unit not found\" });\n      res.json({ message: \"Sub-unit deleted successfully\" });\n    } catch {\n      res.status(500).json({ error: \"Unable to delete sub-unit\" });\n    }\n  };\n\n  addMember = async (req: Request, res: Response) => {\n    try {\n      const subUnitId = Number(req.params.id);\n      const memberId = Number(req.params.memberId);\n      if (Number.isNaN(subUnitId) || Number.isNaN(memberId)) {\n        return res.status(400).json({ error: \"Invalid sub-unit or member ID\" });\n      }\n      const ok = await this.memberSubUnits.add(memberId, subUnitId);\n      if (!ok) return res.status(500).json({ error: \"Failed to add member to sub-unit\" });\n      res.json({ message: \"Member added to sub-unit successfully\" });\n    } catch {\n      res.status(500).json({ error: \"Unable to add member to sub-unit\" });\n    }\n  };\n\n  removeMember = async (req: Request, res: Response) => {\n    try {\n      const subUnitId = Number(req.params.id);\n      const memberId = Number(req.params.memberId);\n      if (Number.isNaN(subUnitId) || Number.isNaN(memberId)) {\n        return res.status(400).json({ error: \"Invalid sub-unit or member ID\" });\n      }\n      const ok = await this.memberSubUnits.remove(memberId, subUnitId);\n      if (!ok) return res.status(404).json({ error: \"Member not in this sub-unit\" });\n      res.json({ message: \"Member removed from sub-unit successfully\" });\n    } catch {\n      res.status(500).json({ error: \"Unable to remove member from sub-unit\" });\n    }\n  };\n\n  members = async (req: Request, res: Response) => {\n    try {\n      const subUnitId = Number(req.params.id);\n      if (Number.isNaN(subUnitId)) return res.status(400).json({ error: \"Invalid sub-unit ID\" });\n      const memberIds = await this.memberSubUnits.findMembersBySubUnit(subUnitId);\n      res.json({ subUnitId, memberIds });\n    } catch {\n      res.status(500).json({ error: \"Unable to retrieve members\" });\n    }\n  };\n}\n","import express from \"express\";\nimport type { UserDao } from \"../../persistance/DAO/UserDao.js\";\nimport { authenticateToken } from \"../../middleware/auth.js\";\nimport { AuthController } from \"../Controller/AuthController.js\";\n\nexport function createAuthRouter(userDao: UserDao) {\n  const router = express.Router();\n  const controller = new AuthController(userDao);\n\n  router.post(\"/auth/register\", controller.register);\n  router.post(\"/auth/login\", controller.login);\n  router.post(\"/auth/refresh\", controller.refresh);\n  router.get(\"/auth/me\", authenticateToken, controller.me);\n\n  return router;\n}\n","import type { Request, Response } from \"express\";\nimport bcrypt from \"bcrypt\";\nimport type { UserDao } from \"../../persistance/DAO/UserDao.js\";\nimport { User, UserRole } from \"../../persistance/Entity/User.js\";\nimport { config } from \"../../config.js\";\nimport { generateToken, generateRefreshToken, verifyRefreshToken } from \"../../middleware/auth.js\";\n\nexport class AuthController {\n  constructor(private users: UserDao) {}\n\n  register = async (req: Request, res: Response) => {\n    try {\n      const { username, password, email } = req.body;\n\n      if (!username || !password || !email) {\n        return res.status(400).json({ error: \"Username, password, and email are required\" });\n      }\n\n      const existingUser = await this.users.findByUsername(username);\n      if (existingUser) return res.status(409).json({ error: \"Username already exists\" });\n\n      const existingEmail = await this.users.findByEmail(email);\n      if (existingEmail) return res.status(409).json({ error: \"Email already exists\" });\n\n      const hashedPassword = await bcrypt.hash(password, config.security.bcryptRounds);\n\n      const allUsers = await this.users.findAll();\n      const isFirstUser = allUsers.length === 0;\n      const newId = isFirstUser ? 1 : Math.max(...allUsers.map((u) => u.id)) + 1;\n      const role = isFirstUser ? UserRole.ADMIN : UserRole.USER;\n\n      const newUser = new User(newId, username, hashedPassword, email, role);\n      const ok = await this.users.insert(newUser);\n      if (!ok) return res.status(500).json({ error: \"Unable to register user\" });\n\n      res.status(201).json({ message: \"User registered successfully\", user: newUser.toSafeObject() });\n    } catch {\n      res.status(500).json({ error: \"Unable to register user\" });\n    }\n  };\n\n  login = async (req: Request, res: Response) => {\n    try {\n      const { username, password } = req.body;\n      if (!username || !password) {\n        return res.status(400).json({ error: \"Username and password are required\" });\n      }\n\n      const user = await this.users.findByUsername(username);\n      if (!user) return res.status(401).json({ error: \"Invalid credentials\" });\n\n      const ok = await bcrypt.compare(password, user.password);\n      if (!ok) return res.status(401).json({ error: \"Invalid credentials\" });\n\n      const payload = { id: user.id, username: user.username, role: user.role };\n\n      res.json({\n        message: \"Login successful\",\n        accessToken: generateToken(payload),\n        refreshToken: generateRefreshToken(payload),\n        user: user.toSafeObject(),\n      });\n    } catch {\n      res.status(500).json({ error: \"Unable to login\" });\n    }\n  };\n\n  refresh = async (req: Request, res: Response) => {\n    try {\n      const { refreshToken } = req.body;\n      if (!refreshToken) return res.status(400).json({ error: \"Refresh token is required\" });\n\n      const decoded = verifyRefreshToken(refreshToken);\n      if (!decoded) return res.status(403).json({ error: \"Invalid or expired refresh token\" });\n\n      const user = await this.users.findById(decoded.id);\n      if (!user) return res.status(403).json({ error: \"User not found\" });\n\n      const payload = { id: user.id, username: user.username, role: user.role };\n      res.json({ accessToken: generateToken(payload) });\n    } catch {\n      res.status(500).json({ error: \"Unable to refresh token\" });\n    }\n  };\n\n  me = async (req: Request, res: Response) => {\n    try {\n      if (!req.user) return res.status(401).json({ error: \"Not authenticated\" });\n      const user = await this.users.findById(req.user.id);\n      if (!user) return res.status(404).json({ error: \"User not found\" });\n      res.json(user.toSafeObject());\n    } catch {\n      res.status(500).json({ error: \"Unable to fetch user information\" });\n    }\n  };\n}\n","import express from \"express\";\nimport type { UserDao } from \"../../persistance/DAO/UserDao.js\";\nimport { authenticateToken, authorizeOwnerOrAdmin, authorizeRoles } from \"../../middleware/auth.js\";\nimport { UserRole } from \"../../persistance/Entity/User.js\";\nimport { UserController } from \"../Controller/UserController.js\";\n\nexport function createUserRouter(userDao: UserDao) {\n  const router = express.Router();\n  const controller = new UserController(userDao);\n\n  router.get(\"/users\", authenticateToken, authorizeRoles(UserRole.ADMIN), controller.findAll);\n  router.get(\"/users/:id\", authenticateToken, authorizeOwnerOrAdmin, controller.findById);\n  router.put(\"/users/:id\", authenticateToken, authorizeOwnerOrAdmin, controller.update);\n  router.delete(\"/users/:id\", authenticateToken, authorizeRoles(UserRole.ADMIN), controller.delete);\n\n  return router;\n}\n","import type { Request, Response } from \"express\";\nimport bcrypt from \"bcrypt\";\nimport type { UserDao } from \"../../persistance/DAO/UserDao.js\";\nimport { UserRole } from \"../../persistance/Entity/User.js\";\nimport { config } from \"../../config.js\";\n\nexport class UserController {\n  constructor(private users: UserDao) {}\n\n  findAll = async (_: Request, res: Response) => {\n    try {\n      const all = await this.users.findAll();\n      res.json(all.map((u) => u.toSafeObject()));\n    } catch {\n      res.status(500).json({ error: \"Unable to retrieve users\" });\n    }\n  };\n\n  findById = async (req: Request, res: Response) => {\n    try {\n      const id = Number(req.params.id);\n      if (Number.isNaN(id)) return res.status(400).json({ error: \"Invalid user ID\" });\n      const user = await this.users.findById(id);\n      if (!user) return res.status(404).json({ error: \"User not found\" });\n      res.json(user.toSafeObject());\n    } catch {\n      res.status(500).json({ error: \"Unable to retrieve user\" });\n    }\n  };\n\n  delete = async (req: Request, res: Response) => {\n    try {\n      const id = Number(req.params.id);\n      if (Number.isNaN(id)) return res.status(400).json({ error: \"Invalid user ID\" });\n      const ok = await this.users.delete(id);\n      if (!ok) return res.status(404).json({ error: \"User not found\" });\n      res.json({ message: \"User deleted successfully\" });\n    } catch {\n      res.status(500).json({ error: \"Unable to delete user\" });\n    }\n  };\n\n  update = async (req: Request, res: Response) => {\n    try {\n      const id = Number(req.params.id);\n      if (Number.isNaN(id)) return res.status(400).json({ error: \"Invalid user ID\" });\n\n      const existing = await this.users.findById(id);\n      if (!existing) return res.status(404).json({ error: \"User not found\" });\n\n      const { username, email, password, role } = req.body;\n\n      if (username && username !== existing.username) {\n        const u = await this.users.findByUsername(username);\n        if (u && u.id !== id) return res.status(409).json({ error: \"Username already taken\" });\n        existing.username = username;\n      }\n\n      if (email && email !== existing.email) {\n        const u = await this.users.findByEmail(email);\n        if (u && u.id !== id) return res.status(409).json({ error: \"Email already taken\" });\n        existing.email = email;\n      }\n\n      if (password) {\n        existing.password = await bcrypt.hash(password, config.security.bcryptRounds);\n      }\n\n      // Only admins can change roles\n      if (role && req.user?.role === UserRole.ADMIN && Object.values(UserRole).includes(role)) {\n        existing.role = role;\n      }\n\n      const ok = await this.users.update(existing);\n      if (!ok) return res.status(500).json({ error: \"Failed to update user\" });\n\n      res.json({ message: \"User updated successfully\", user: existing.toSafeObject() });\n    } catch {\n      res.status(500).json({ error: \"Unable to update user\" });\n    }\n  };\n}\n"],"mappings":"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","names":["express","UserRole","member","ok","express","express","express","express","express","express","express","express","express","bcrypt","bcrypt","express","express"]}